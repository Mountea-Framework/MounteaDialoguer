import{c as O,j as e,a as Z,M as U,U as qe,B as p,X as Ve,b as Xe,L as oe,D as A,F as Ge,u as $e,r as j,T as Be,P as I,e as He,f as Je,I as Ke,g as Qe,h as es,i as ss,R as Oe}from"./index-CXvgXj44.js";import{u as C,b as we,L as w,I as P,a as _e}from"./label--SI774qy.js";import{D as Y,a as X,b as G,c as F,d as ts,e as as,f as rs,u as K,g as de,M as is,S as Le}from"./confetti-CXCcfgqv.js";import{useCategoryStore as M}from"./categoryStore-C31uLd0g.js";import{C as k,a as D,c as Te,b as ye,d as ne,e as le,g as ce}from"./card-p_i8sGab.js";import{j as Q,D as q,a as V,b as $,c as B,d as H,e as J,S as ee,f as se,i as te,g as ae,h as T}from"./deviceDetection-eoYQl9Qh.js";import{T as R,A as me,a as xe,b as he,c as ue,d as pe,e as ge,f as je,g as fe,h as ns,S as ls,M as cs}from"./alert-dialog-C6AS5DOY.js";import{C as os,E as ds}from"./empty-state-D-vodUzi.js";import{S as Me}from"./separator-CY7RUGO-.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=O("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=O("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=O("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=O("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=O("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=O("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=O("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=O("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=O("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ps={variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}};function Ce({className:s,variant:l="default",...t}){return e.jsx("div",{className:Z("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",ps.variant[l],s),...t})}function gs({activeSection:s,onSectionChange:l,project:t,dialogueCount:a=0,participantCount:c=0,isMobileOpen:g=!1,onMobileClose:N}){const{t:d}=C(),x=[{id:"overview",label:d("navigation.dashboard"),icon:hs,color:"text-blue-500"},{id:"dialogues",label:d("dialogues.title"),icon:U,color:"text-blue-500",count:a},{id:"participants",label:d("participants.title"),icon:qe,color:"text-purple-500",count:c},{id:"categories",label:d("categories.title"),icon:Re,color:"text-orange-500"},{id:"decorators",label:d("decorators.title"),icon:us,color:"text-green-500"}];return e.jsxs("aside",{className:Z("w-64 flex-shrink-0 bg-card border-r border-border flex flex-col h-full transition-transform duration-300 ease-in-out","lg:translate-x-0 lg:static lg:z-0","fixed inset-y-0 left-0 z-50",g?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[e.jsx("div",{className:"lg:hidden flex justify-end p-4",children:e.jsx(p,{variant:"ghost",size:"icon",onClick:N,className:"rounded-full",children:e.jsx(Ve,{className:"h-5 w-5"})})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/10 dark:to-indigo-900/10 border border-blue-100 dark:border-blue-900/30 flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center text-white shadow-md mb-2",children:e.jsx(Re,{className:"h-6 w-6"})}),e.jsx("h3",{className:"font-bold text-sm line-clamp-1",children:t==null?void 0:t.name}),(t==null?void 0:t.version)&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["v",t.version]})]})}),e.jsx("nav",{className:"flex-1 px-3 py-2 space-y-1 overflow-y-auto",children:x.map(n=>{const m=n.icon,o=s===n.id;return e.jsxs("button",{onClick:()=>l(n.id),className:Z("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",o?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[e.jsx(m,{className:Z("h-5 w-5",o&&n.color)}),e.jsx("span",{className:"flex-1 text-left",children:n.label}),n.count!==void 0&&e.jsx("span",{className:"text-[10px] bg-muted px-1.5 py-0.5 rounded-md",children:n.count})]},n.id)})}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("button",{onClick:()=>l("settings"),className:Z("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",s==="settings"?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-accent hover:text-foreground"),children:[e.jsx(Xe,{className:"h-5 w-5"}),e.jsx("span",{children:d("navigation.settings")})]})})]})}function js({project:s,dialogues:l=[],participants:t=[],categories:a=[],decorators:c=[],onExport:g,onImport:N,onDelete:d,onSectionChange:x,fileInputRef:n,isImporting:m=!1}){const{t:o}=C(),r=l.reduce((u,h)=>u+(h.nodeCount||0),0),v=[...l].sort((u,h)=>new Date(h.modifiedAt)-new Date(u.modifiedAt)).slice(0,5);return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 text-xs font-medium text-muted-foreground mb-4 ${Q?"hidden":""}`,children:[e.jsx(oe,{to:"/",className:"hover:text-primary cursor-pointer",children:o("projects.title")}),e.jsx(Ue,{className:"h-3 w-3"}),e.jsx("span",{className:"text-foreground",children:s.name})]}),e.jsxs("div",{className:"flex items-start justify-between mb-10",children:[e.jsxs("div",{className:"group flex-1",children:[e.jsx("label",{className:"block text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1",children:o("projects.projectName")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl md:text-4xl font-bold tracking-tight",children:s.name}),s.version&&e.jsxs(Ce,{variant:"success",children:["v",s.version]}),e.jsx("button",{onClick:()=>x==null?void 0:x("settings"),className:"opacity-0 group-hover:opacity-100 p-1.5 rounded-full hover:bg-accent text-muted-foreground hover:text-primary transition-all",title:"Project Settings",children:e.jsx(W,{className:"h-5 w-5"})})]}),s.description&&e.jsx("p",{className:"mt-3 text-lg text-muted-foreground leading-relaxed max-w-2xl",children:s.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:n,type:"file",accept:".mnteadlgproj",onChange:N,className:"hidden"}),e.jsx("div",{className:"md:hidden",children:e.jsxs(Y,{className:!0,children:[e.jsx(X,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsxs(F,{onClick:()=>{var u;return(u=n==null?void 0:n.current)==null?void 0:u.click()},disabled:m,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),o("common.import")]}),e.jsxs(F,{onClick:g,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),o("common.export")]}),e.jsx(ts,{}),e.jsxs(F,{onClick:d,className:"text-destructive focus:text-destructive",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),o("common.delete")]})]})]})}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{var u;return(u=n==null?void 0:n.current)==null?void 0:u.click()},disabled:m,className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),o("common.import")]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:g,className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),o("common.export")]}),e.jsx(p,{variant:"outline",size:"sm",onClick:d,className:"gap-2 text-destructive hover:text-destructive hover:border-destructive/50",children:e.jsx(R,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4 mb-6",children:[e.jsx(k,{children:e.jsx(D,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-primary shrink-0",children:e.jsx(Ge,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:"File Size"}),e.jsx("h3",{className:"text-lg font-bold",children:"--"}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r," ",o("dialogues.nodes")]})]})]})})}),e.jsx(k,{children:e.jsx(D,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center text-purple-600 dark:text-purple-400 shrink-0",children:e.jsx(ms,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:o("projects.modified")}),e.jsx("h3",{className:"text-lg font-bold truncate",children:Te(s.modifiedAt)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Current User"})]})]})})}),e.jsx(k,{children:e.jsx(D,{className:"p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-orange-600 dark:text-orange-400 shrink-0",children:e.jsx(os,{className:"h-4 w-4"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:o("projects.created")}),e.jsx("h3",{className:"text-lg font-bold",children:ye(s.createdAt)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:s.version?`v${s.version}`:"v1.0.0"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold",children:o("dialogues.title")}),e.jsxs("button",{onClick:()=>x==null?void 0:x("dialogues"),className:"text-sm text-primary hover:text-blue-600 font-medium flex items-center gap-1 transition-colors",children:["View All ",e.jsx(Ue,{className:"h-4 w-4"})]})]}),e.jsx(k,{children:e.jsx(D,{className:"p-0",children:v.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(U,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o("dialogues.noDialogues")})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"divide-y divide-border",children:v.map(u=>e.jsxs(oe,{to:"/projects/$projectId/dialogue/$dialogueId",params:{projectId:s.id,dialogueId:u.id},className:"p-4 flex items-center justify-between group hover:bg-accent transition-colors cursor-pointer hover:rounded-lg rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center text-blue-500",children:e.jsx(U,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Te(u.modifiedAt)," â€¢ ",u.nodeCount||0," ",o("dialogues.nodes")]})]})]}),e.jsx("button",{className:"opacity-0 group-hover:opacity-100 p-2 rounded-lg bg-card shadow-sm border border-border text-primary hover:bg-primary hover:text-primary-foreground transition-all",children:e.jsx(W,{className:"h-4 w-4"})})]},u.id))}),e.jsx("div",{className:"bg-muted/50 px-4 py-3 border-t border-border text-center",children:e.jsxs("button",{type:"button",onClick:()=>x==null?void 0:x("dialogues"),className:"text-xs font-medium text-muted-foreground hover:text-primary transition-colors",children:["+ ",o("dialogues.createNew")]})})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{children:e.jsxs(D,{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider mb-4",children:"Project Metadata"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Project ID"}),e.jsxs("div",{className:"flex items-center justify-between bg-muted/50 p-2 rounded-lg border border-border",children:[e.jsxs("code",{className:"text-xs font-mono",children:[s.id.substring(0,12),"..."]}),e.jsx("button",{className:"text-muted-foreground hover:text-primary text-xs",children:"ðŸ“‹"})]})]}),e.jsxs("div",{className:"pt-2 border-t border-border",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:o("dialogues.title")}),e.jsx("span",{className:"font-medium",children:l.length})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:o("participants.title")}),e.jsx("span",{className:"font-medium",children:t.length})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:o("categories.title")}),e.jsx("span",{className:"font-medium",children:a.length})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:o("decorators.title")}),e.jsx("span",{className:"font-medium",children:c.length})]})]})]})]})}),t.length>0&&e.jsx(k,{children:e.jsxs(D,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider",children:"Top Participants"}),e.jsx("button",{onClick:()=>x==null?void 0:x("participants"),className:"text-xs text-primary hover:underline",children:"Manage"})]}),e.jsxs("div",{className:"flex -space-x-2 overflow-hidden mb-3",children:[t.slice(0,4).map(u=>e.jsx("div",{className:"inline-block h-8 w-8 rounded-full ring-2 ring-card bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-xs font-bold",children:u.name.charAt(0).toUpperCase()},u.id)),t.length>4&&e.jsxs("div",{className:"h-8 w-8 rounded-full ring-2 ring-card bg-muted flex items-center justify-center text-xs font-medium text-muted-foreground",children:["+",t.length-4]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," ",t.length===1?"participant":"participants"," in this project."]})]})})]})]})]})}function fs({dialogue:s,projectId:l}){const{t}=C(),a=$e(),c=s.nodeCount||0;return e.jsx(oe,{to:"/projects/$projectId/dialogue/$dialogueId",params:{projectId:l,dialogueId:s.id},children:e.jsxs(k,{className:"group cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all h-full flex flex-col overflow-hidden rounded-lg",children:[e.jsxs("div",{className:"h-32 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 flex items-center justify-center relative overflow-hidden rounded-t-lg",children:[e.jsx("div",{className:"absolute inset-0 opacity-30 dark:opacity-20 bg-[radial-gradient(#9333ea_1px,transparent_1px)] [background-size:16px_16px]"}),e.jsx(U,{className:"h-12 w-12 text-purple-500 dark:text-purple-400 opacity-80 group-hover:scale-110 group-hover:rotate-6 transition-all duration-300 relative z-10"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(p,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full bg-background/90 backdrop-blur-sm",onClick:g=>{g.preventDefault(),g.stopPropagation(),a({to:"/projects/$projectId/dialogue/$dialogueId/settings",params:{projectId:l,dialogueId:s.id}})},children:e.jsx(xs,{className:"h-3.5 w-3.5"})})})]}),e.jsxs(D,{className:"p-4 flex-1 flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsx("h3",{className:"font-bold text-base group-hover:text-primary transition-colors line-clamp-1",children:s.name})}),s.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-3 line-clamp-2 leading-relaxed",children:s.description}),e.jsx("div",{className:"mt-auto pt-3 border-t flex items-center justify-center text-xs text-muted-foreground",children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(U,{className:"h-3.5 w-3.5 group-hover:text-purple-500 transition-colors"}),e.jsxs("span",{className:"font-medium",children:[c," ",c===1?"node":"nodes"]})]})})]})]})})}function Ns({open:s,onOpenChange:l,projectId:t}){const{t:a}=C(),c=$e(),{createDialogue:g,dialogues:N}=we(),[d,x]=j.useState({name:"",description:""}),[n,m]=j.useState({}),[o,r]=j.useState(!1),v=(f,b)=>{x(y=>({...y,[f]:b})),n[f]&&m(y=>({...y,[f]:null}))},u=()=>{const f={};return d.name.trim()?/\s/.test(d.name)&&(f.name="Name cannot contain whitespace"):f.name=a("validation.required"),m(f),Object.keys(f).length===0},h=async f=>{if(f.preventDefault(),!!u()){r(!0);try{const y=N.filter(E=>E.projectId===t).length===0,L=await g({projectId:t,name:d.name.trim(),description:d.description.trim()});y?as():rs(),x({name:"",description:""}),m({}),l(!1),setTimeout(()=>{c({to:"/projects/$projectId/dialogue/$dialogueId",params:{projectId:t,dialogueId:L.id}})},1e3)}catch(b){console.error("Error creating dialogue:",b),m({submit:a("common.error")})}finally{r(!1)}}},i=()=>{x({name:"",description:""}),m({}),l(!1)};return e.jsx(q,{open:s,onOpenChange:l,children:e.jsxs(V,{className:"sm:max-w-[500px]",children:[e.jsxs($,{children:[e.jsx(B,{children:a("dialogues.createNew")}),e.jsx(H,{children:a("dialogues.createFirst")})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(w,{htmlFor:"dialogue-name",children:[a("dialogues.dialogueName")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(P,{id:"dialogue-name",placeholder:"Welcome Conversation",value:d.name,onChange:f=>v("name",f.target.value),className:n.name?"border-destructive":"",autoFocus:!0}),n.name&&e.jsx("p",{className:"text-xs text-destructive",children:n.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"dialogue-description",children:a("projects.projectDescription")}),e.jsx(Be,{id:"dialogue-description",placeholder:"A brief description of this dialogue...",value:d.description,onChange:f=>v("description",f.target.value),rows:3})]}),n.submit&&e.jsx("p",{className:"text-sm text-destructive",children:n.submit}),e.jsxs(J,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:i,disabled:o,children:a("common.cancel")}),e.jsx(p,{type:"submit",disabled:o,children:a(o?"common.loading":"common.create")})]})]})]})})}function vs({projectId:s,dialogues:l=[]}){const{t}=C(),{importDialogue:a}=we(),[c,g]=j.useState(!1),[N,d]=j.useState(!1),x=j.useRef(null),n=async m=>{var r;const o=(r=m.target.files)==null?void 0:r[0];if(o){d(!0);try{await a(s,o)}catch(v){console.error("Failed to import dialogue:",v)}finally{d(!1),x.current&&(x.current.value="")}}};return e.jsxs("div",{children:[e.jsx(Ns,{open:c,onOpenChange:g,projectId:s}),e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[t("dialogues.title")," (",l.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:x,type:"file",accept:".mnteadlg",onChange:n,className:"hidden"}),e.jsxs("div",{className:"md:hidden flex gap-2 flex-1",children:[e.jsxs(Y,{children:[e.jsx(X,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsx(G,{align:"end",children:e.jsxs(F,{onClick:()=>{var m;return(m=x.current)==null?void 0:m.click()},disabled:N,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),t("common.import")]})})]}),e.jsxs(p,{size:"icon",onClick:()=>g(!0),className:"gap-2 flex-1 rounded-full",children:[e.jsx(I,{className:"h-4 w-4"}),!Q&&t("dialogues.createNew")]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{var m;return(m=x.current)==null?void 0:m.click()},disabled:N,className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),t("common.import")]}),e.jsxs(p,{size:"sm",onClick:()=>g(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("dialogues.createNew")]})]})]})]}),l.length===0?e.jsx(ds,{icon:U,title:t("dialogues.noDialogues"),description:t("dialogues.createFirst"),action:e.jsxs(p,{type:"button",onClick:()=>g(!0),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),t("dialogues.createNew")]}),tips:["Dialogues are the backbone of your interactive narratives","Use nodes to create branching conversations","Connect nodes to create dialogue flow"]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(m=>e.jsx(fs,{dialogue:m,projectId:s},m.id))})]})}function bs({open:s,onOpenChange:l,projectId:t}){const{t:a}=C(),{createParticipant:c}=K(),{categories:g,loadCategories:N}=M(),[d,x]=j.useState(!1),[n,m]=j.useState({name:"",category:""}),[o,r]=j.useState({});j.useEffect(()=>{s&&t&&N(t)},[s,t,N]);const v=()=>{const h={};return n.name.trim()?/\s/.test(n.name)&&(h.name="Name cannot contain whitespace"):h.name=a("validation.required"),n.category||(h.category=a("validation.required")),r(h),Object.keys(h).length===0},u=async h=>{if(h.preventDefault(),!!v()){x(!0);try{await c({...n,projectId:t}),m({name:"",category:""}),r({}),l(!1)}catch(i){console.error("Failed to create participant:",i)}finally{x(!1)}}};return e.jsx(q,{open:s,onOpenChange:l,children:e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsx(B,{children:a("participants.addNew")}),e.jsx(H,{children:a("participants.createDescription")})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"name",children:[a("participants.name")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(P,{id:"name",value:n.name,onChange:h=>{m({...n,name:h.target.value}),o.name&&r({...o,name:null})},placeholder:a("participants.namePlaceholder"),className:o.name?"border-destructive":"",required:!0}),o.name&&e.jsx("p",{className:"text-xs text-destructive",children:o.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"category",children:[a("participants.category")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ee,{value:n.category,onValueChange:h=>{m({...n,category:h}),o.category&&r({...o,category:null})},required:!0,children:[e.jsx(se,{className:o.category?"border-destructive":"",children:e.jsx(te,{placeholder:a("participants.categoryPlaceholder")})}),e.jsx(ae,{children:g.length===0?e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:a("categories.noCategories")}):g.map(h=>e.jsx(T,{value:h.name,children:h.name},h.id))})]}),o.category&&e.jsx("p",{className:"text-xs text-destructive",children:o.category})]})]}),e.jsxs(J,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:d,children:a("common.cancel")}),e.jsx(p,{type:"submit",disabled:d||!n.name.trim()||!n.category,children:a(d?"common.creating":"common.create")})]})]})]})})}function ys({open:s,onOpenChange:l,participant:t,projectId:a}){const{t:c}=C(),{updateParticipant:g}=K(),{categories:N,loadCategories:d}=M(),[x,n]=j.useState(!1),[m,o]=j.useState({name:"",category:""}),[r,v]=j.useState({});j.useEffect(()=>{s&&a&&d(a),s&&t&&o({name:t.name||"",category:t.category||""})},[s,a,t,d]),j.useEffect(()=>{s||v({})},[s]);const u=()=>{const i={};return m.name.trim()?/\s/.test(m.name)&&(i.name="Name cannot contain whitespace"):i.name=c("validation.required"),m.category||(i.category=c("validation.required")),v(i),Object.keys(i).length===0},h=async i=>{if(i.preventDefault(),!!u()){n(!0);try{await g(t.id,m),l(!1)}catch(f){console.error("Failed to update participant:",f)}finally{n(!1)}}};return e.jsx(q,{open:s,onOpenChange:l,children:e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsxs(B,{children:[c("common.edit")," ",c("participants.title").slice(0,-1)]}),e.jsx(H,{children:"Update the participant's information"})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"name",children:[c("participants.name")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(P,{id:"name",value:m.name,onChange:i=>{o({...m,name:i.target.value}),r.name&&v({...r,name:null})},placeholder:c("participants.namePlaceholder"),className:r.name?"border-destructive":"",required:!0}),r.name&&e.jsx("p",{className:"text-xs text-destructive",children:r.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"category",children:[c("participants.category")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(ee,{value:m.category,onValueChange:i=>{o({...m,category:i}),r.category&&v({...r,category:null})},required:!0,children:[e.jsx(se,{className:r.category?"border-destructive":"",children:e.jsx(te,{placeholder:c("participants.categoryPlaceholder")})}),e.jsx(ae,{children:N.length===0?e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:c("categories.noCategories")}):N.map(i=>e.jsx(T,{value:i.name,children:i.name},i.id))})]}),r.category&&e.jsx("p",{className:"text-xs text-destructive",children:r.category})]})]}),e.jsxs(J,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:x,children:c("common.cancel")}),e.jsx(p,{type:"submit",disabled:x||!m.name.trim()||!m.category,children:c(x?"common.saving":"common.save")})]})]})]})})}function ws({participant:s}){const{t:l}=C(),{deleteParticipant:t}=K(),[a,c]=j.useState(!1),[g,N]=j.useState(!1),[d,x]=j.useState(!1),n=async()=>{x(!0);try{await t(s.id),c(!1)}catch(m){console.error("Failed to delete participant:",m)}finally{x(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"group hover:shadow-md transition-all hover:border-primary/50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-lg",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:s.name}),s.category&&e.jsx(Ce,{variant:"outline",className:"mt-1 text-xs",children:s.category})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:()=>N(!0),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>c(!0),children:e.jsx(R,{className:"h-4 w-4"})})]})]})})}),e.jsx(ys,{open:g,onOpenChange:N,participant:s,projectId:s.projectId}),e.jsx(me,{open:a,onOpenChange:c,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:l("participants.deleteTitle")}),e.jsx(pe,{children:l("participants.deleteDescription",{name:s.name})})]}),e.jsxs(ge,{children:[e.jsx(je,{disabled:d,children:l("common.cancel")}),e.jsx(fe,{onClick:n,disabled:d,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:l(d?"common.deleting":"common.delete")})]})]})})]})}function Cs({projectId:s,participants:l=[]}){const{t}=C(),{importParticipants:a,exportParticipants:c}=K(),[g,N]=j.useState(!1),[d,x]=j.useState(!1),n=j.useRef(null),m=async()=>{try{const r=await c(s),v=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),u=URL.createObjectURL(v),h=document.createElement("a");h.href=u,h.download=`participants-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)}catch(r){console.error("Failed to export participants:",r)}},o=async r=>{var u;const v=(u=r.target.files)==null?void 0:u[0];if(v){x(!0);try{const h=await v.text(),i=JSON.parse(h);await a(s,Array.isArray(i)?i:[i])}catch(h){console.error("Failed to import participants:",h)}finally{x(!1),n.current&&(n.current.value="")}}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[t("participants.title")," (",l.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("participants.description")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:n,type:"file",accept:".json",onChange:o,className:"hidden"}),e.jsxs("div",{className:"md:hidden flex gap-2 flex-1",children:[e.jsxs(Y,{children:[e.jsx(X,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsxs(F,{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},disabled:d,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),t("common.import")]}),e.jsxs(F,{onClick:m,disabled:l.length===0,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("common.export")]})]})]}),e.jsxs(p,{size:"icon",onClick:()=>N(!0),className:"gap-2 flex-1 rounded-full",children:[e.jsx(I,{className:"h-4 w-4"}),!Q&&t("participants.addNew")]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},disabled:d,className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),t("common.import")]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:m,disabled:l.length===0,className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),t("common.export")]}),e.jsxs(p,{size:"sm",onClick:()=>N(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("participants.addNew")]})]})]})]}),l.length===0?e.jsx(k,{children:e.jsx(D,{className:"p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(qe,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("participants.noParticipants")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-sm",children:t("participants.noParticipantsDescription")}),e.jsxs(p,{onClick:()=>N(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("participants.addNew")]})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(r=>e.jsx(ws,{participant:r},r.id))}),e.jsx(bs,{open:g,onOpenChange:N,projectId:s})]})}function ks({open:s,onOpenChange:l,projectId:t}){const{t:a}=C(),{categories:c,createCategory:g,loadCategories:N}=M(),[d,x]=j.useState(!1),[n,m]=j.useState({name:"",parentCategoryId:null}),[o,r]=j.useState({});j.useEffect(()=>{s&&t&&N(t)},[s,t,N]),j.useEffect(()=>{s||(m({name:"",parentCategoryId:null}),r({}))},[s]);const v=()=>{const i={};return n.name.trim()?/\s/.test(n.name)&&(i.name="Name cannot contain whitespace"):i.name=a("validation.required"),r(i),Object.keys(i).length===0},u=async i=>{if(i.preventDefault(),!!v()){x(!0);try{await g({name:n.name,parentCategoryId:n.parentCategoryId||null,projectId:t}),m({name:"",parentCategoryId:null}),r({}),l(!1)}catch(f){console.error("Failed to create category:",f)}finally{x(!1)}}},h=i=>{const f=[];let b=c.find(y=>y.id===i);for(;b;)f.unshift(b.name),b=c.find(y=>y.id===b.parentCategoryId);return f.join(" > ")};return e.jsx(q,{open:s,onOpenChange:l,children:e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsx(B,{children:a("categories.addNew")}),e.jsx(H,{children:a("categories.createDescription")})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"name",children:[a("categories.name")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(P,{id:"name",value:n.name,onChange:i=>{m({...n,name:i.target.value}),o.name&&r({...o,name:null})},placeholder:a("categories.namePlaceholder"),className:o.name?"border-destructive":"",required:!0}),o.name&&e.jsx("p",{className:"text-xs text-destructive",children:o.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"parentCategory",children:a("categories.parentCategory")}),e.jsxs(ee,{value:n.parentCategoryId||"none",onValueChange:i=>m({...n,parentCategoryId:i==="none"?null:i}),children:[e.jsx(se,{children:e.jsx(te,{placeholder:a("categories.parentCategoryPlaceholder")})}),e.jsxs(ae,{children:[e.jsx(T,{value:"none",children:a("categories.noParent")}),c.map(i=>e.jsx(T,{value:i.id,children:h(i.id)},i.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a("categories.parentCategoryHelp")})]})]}),e.jsxs(J,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:d,children:a("common.cancel")}),e.jsx(p,{type:"submit",disabled:d||!n.name.trim(),children:a(d?"common.creating":"common.create")})]})]})]})})}function Ds({open:s,onOpenChange:l,category:t,projectId:a}){const{t:c}=C(),{categories:g,updateCategory:N,loadCategories:d}=M(),[x,n]=j.useState(!1),[m,o]=j.useState({name:"",parentCategoryId:null}),[r,v]=j.useState({});j.useEffect(()=>{s&&a&&d(a),s&&t&&o({name:t.name||"",parentCategoryId:t.parentCategoryId||null})},[s,a,t,d]),j.useEffect(()=>{s||v({})},[s]);const u=()=>{const f={};return m.name.trim()?/\s/.test(m.name)&&(f.name="Name cannot contain whitespace"):f.name=c("validation.required"),v(f),Object.keys(f).length===0},h=async f=>{if(f.preventDefault(),!!u()){n(!0);try{await N(t.id,{name:m.name,parentCategoryId:m.parentCategoryId||null}),l(!1)}catch(b){console.error("Failed to update category:",b)}finally{n(!1)}}},i=f=>{const b=[];let y=g.find(L=>L.id===f);for(;y;)b.unshift(y.name),y=g.find(L=>L.id===y.parentCategoryId);return b.join(" > ")};return e.jsx(q,{open:s,onOpenChange:l,children:e.jsxs(V,{className:"sm:max-w-[425px]",children:[e.jsxs($,{children:[e.jsxs(B,{children:[c("common.edit")," ",c("categories.title").slice(0,-1)]}),e.jsx(H,{children:"Update the category's information"})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"name",children:[c("categories.name")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(P,{id:"name",value:m.name,onChange:f=>{o({...m,name:f.target.value}),r.name&&v({...r,name:null})},placeholder:c("categories.namePlaceholder"),className:r.name?"border-destructive":"",required:!0}),r.name&&e.jsx("p",{className:"text-xs text-destructive",children:r.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"parentCategory",children:c("categories.parentCategory")}),e.jsxs(ee,{value:m.parentCategoryId||"none",onValueChange:f=>o({...m,parentCategoryId:f==="none"?null:f}),children:[e.jsx(se,{children:e.jsx(te,{placeholder:c("categories.parentCategoryPlaceholder")})}),e.jsxs(ae,{children:[e.jsx(T,{value:"none",children:c("categories.noParent")}),g.filter(f=>f.id!==(t==null?void 0:t.id)).map(f=>e.jsx(T,{value:f.id,children:i(f.id)},f.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c("categories.parentCategoryHelp")})]})]}),e.jsxs(J,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:x,children:c("common.cancel")}),e.jsx(p,{type:"submit",disabled:x||!m.name.trim(),children:c(x?"common.saving":"common.save")})]})]})]})})}function Ss({category:s}){const{t:l}=C(),{categories:t,deleteCategory:a}=M(),[c,g]=j.useState(!1),[N,d]=j.useState(!1),[x,n]=j.useState(!1),m=async()=>{n(!0);try{await a(s.id),g(!1)}catch(v){console.error("Failed to delete category:",v)}finally{n(!1)}},r=(()=>{if(!s.parentCategoryId)return null;const v=[];let u=s.parentCategoryId;for(;u;){const h=t.find(i=>i.id===u);if(!h)break;v.unshift(h.name),u=h.parentCategoryId}return v.length>0?v.join(" > "):null})();return e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"group hover:shadow-md transition-all hover:border-primary/50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-orange-500 to-pink-500 flex items-center justify-center text-white",children:e.jsx(He,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:s.name}),r&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:r})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary",onClick:()=>d(!0),children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>g(!0),children:e.jsx(R,{className:"h-4 w-4"})})]})]})})}),e.jsx(Ds,{open:N,onOpenChange:d,category:s,projectId:s.projectId}),e.jsx(me,{open:c,onOpenChange:g,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:l("categories.deleteTitle")}),e.jsx(pe,{children:l("categories.deleteDescription",{name:s.name})})]}),e.jsxs(ge,{children:[e.jsx(je,{disabled:x,children:l("common.cancel")}),e.jsx(fe,{onClick:m,disabled:x,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:l(x?"common.deleting":"common.delete")})]})]})})]})}function Is({projectId:s,categories:l=[]}){const{t}=C(),{importCategories:a,exportCategories:c}=M(),[g,N]=j.useState(!1),[d,x]=j.useState(!1),n=j.useRef(null),m=async()=>{try{const r=await c(s),v=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),u=URL.createObjectURL(v),h=document.createElement("a");h.href=u,h.download=`categories-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)}catch(r){console.error("Failed to export categories:",r)}},o=async r=>{var u;const v=(u=r.target.files)==null?void 0:u[0];if(v){x(!0);try{const h=await v.text(),i=JSON.parse(h);await a(s,Array.isArray(i)?i:[i])}catch(h){console.error("Failed to import categories:",h)}finally{x(!1),n.current&&(n.current.value="")}}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-top justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[t("categories.title")," (",l.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("categories.description")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:n,type:"file",accept:".json",onChange:o,className:"hidden"}),e.jsxs("div",{className:"md:hidden flex gap-2 flex-1",children:[e.jsxs(Y,{children:[e.jsx(X,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsxs(F,{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},disabled:d,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),t("common.import")]}),e.jsxs(F,{onClick:m,disabled:l.length===0,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("common.export")]})]})]}),e.jsxs(p,{size:"icon",onClick:()=>N(!0),className:"gap-2 flex-1 rounded-full",children:[e.jsx(I,{className:"h-4 w-4"}),!Q&&t("categories.addNew")]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},disabled:d,className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),t("common.import")]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:m,disabled:l.length===0,className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),t("common.export")]}),e.jsxs(p,{size:"sm",onClick:()=>N(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("categories.addNew")]})]})]})]}),l.length===0?e.jsx(k,{children:e.jsx(D,{className:"p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(He,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("categories.noCategories")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-sm",children:t("categories.noCategoriesDescription")}),e.jsxs(p,{onClick:()=>N(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("categories.addNew")]})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(r=>e.jsx(Ss,{category:r},r.id))}),e.jsx(ks,{open:g,onOpenChange:N,projectId:s})]})}const Ps=[{value:"string",label:"String"},{value:"int",label:"Integer"},{value:"float",label:"Float"},{value:"bool",label:"Boolean"}];function Fs({open:s,onOpenChange:l,projectId:t}){const{t:a}=C(),{createDecorator:c}=de(),[g,N]=j.useState(!1),[d,x]=j.useState({name:"",type:"",properties:[]}),[n,m]=j.useState({}),o=()=>{x({...d,properties:[...d.properties,{name:"",type:"string",defaultValue:""}]})},r=(i,f,b)=>{const y=[...d.properties];y[i]={...y[i],[f]:b},x({...d,properties:y})},v=i=>{x({...d,properties:d.properties.filter((f,b)=>b!==i)})},u=()=>{const i={};return d.name.trim()?/\s/.test(d.name)&&(i.name="Name cannot contain whitespace"):i.name=a("validation.required"),m(i),Object.keys(i).length===0},h=async i=>{if(i.preventDefault(),!!u()){N(!0);try{await c({...d,projectId:t}),x({name:"",type:"",properties:[]}),m({}),l(!1)}catch(f){console.error("Failed to create decorator:",f)}finally{N(!1)}}};return e.jsx(q,{open:s,onOpenChange:l,children:e.jsxs(V,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs($,{children:[e.jsx(B,{children:a("decorators.addNew")}),e.jsx(H,{children:a("decorators.createDescription")})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(w,{htmlFor:"name",children:[a("decorators.name")," ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(P,{id:"name",value:d.name,onChange:i=>{x({...d,name:i.target.value}),n.name&&m({...n,name:null})},placeholder:a("decorators.namePlaceholder"),className:n.name?"border-destructive":"",required:!0}),n.name&&e.jsx("p",{className:"text-xs text-destructive",children:n.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"type",children:a("decorators.type")}),e.jsx(P,{id:"type",value:d.type,onChange:i=>x({...d,type:i.target.value}),placeholder:a("decorators.typePlaceholder")})]}),e.jsxs("div",{className:"grid gap-3 border-t pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{children:"Properties"}),e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:o,className:"gap-2",children:[e.jsx(I,{className:"h-3 w-3"}),"Add Property"]})]}),d.properties.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No properties defined. Add properties to customize this decorator."}),d.properties.map((i,f)=>e.jsxs("div",{className:"grid grid-cols-[1fr,120px,1fr,auto] gap-2 items-end bg-muted p-3 rounded-md",children:[e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(w,{className:"text-xs",children:"Property Name"}),e.jsx(P,{value:i.name,onChange:b=>r(f,"name",b.target.value),placeholder:"e.g., Speed",size:"sm",required:!0})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(w,{className:"text-xs",children:"Type"}),e.jsxs(ee,{value:i.type,onValueChange:b=>r(f,"type",b),children:[e.jsx(se,{children:e.jsx(te,{})}),e.jsx(ae,{children:Ps.map(b=>e.jsx(T,{value:b.value,children:b.label},b.value))})]})]}),e.jsxs("div",{className:"grid gap-1.5",children:[e.jsx(w,{className:"text-xs",children:"Default Value"}),e.jsx(P,{value:i.defaultValue,onChange:b=>r(f,"defaultValue",b.target.value),placeholder:i.type==="bool"?"true/false":i.type==="int"?"0":i.type==="float"?"0.0":"value",size:"sm"})]}),e.jsx(p,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(f),className:"h-9 w-9",children:e.jsx(Ve,{className:"h-4 w-4"})})]},f))]})]}),e.jsxs(J,{children:[e.jsx(p,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:g,children:a("common.cancel")}),e.jsx(p,{type:"submit",disabled:g||!d.name.trim(),children:a(g?"common.creating":"common.create")})]})]})]})})}function zs({decorator:s}){const{t:l}=C(),{deleteDecorator:t}=de(),[a,c]=j.useState(!1),[g,N]=j.useState(!1),d=async()=>{N(!0);try{await t(s.id),c(!1)}catch(x){console.error("Failed to delete decorator:",x)}finally{N(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"group hover:shadow-md transition-all hover:border-primary/50",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-purple-500 to-indigo-500 flex items-center justify-center text-white",children:e.jsx(Je,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:s.name}),s.type&&e.jsx(Ce,{variant:"outline",className:"mt-1 text-xs",children:s.type})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(W,{className:"h-4 w-4"})}),e.jsx(p,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-destructive",onClick:()=>c(!0),children:e.jsx(R,{className:"h-4 w-4"})})]})]})})}),e.jsx(me,{open:a,onOpenChange:c,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:l("decorators.deleteTitle")}),e.jsx(pe,{children:l("decorators.deleteDescription",{name:s.name})})]}),e.jsxs(ge,{children:[e.jsx(je,{disabled:g,children:l("common.cancel")}),e.jsx(fe,{onClick:d,disabled:g,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:l(g?"common.deleting":"common.delete")})]})]})})]})}function Es({projectId:s,decorators:l=[]}){const{t}=C(),{importDecorators:a,exportDecorators:c}=de(),[g,N]=j.useState(!1),[d,x]=j.useState(!1),n=j.useRef(null),m=async()=>{try{const r=await c(s),v=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),u=URL.createObjectURL(v),h=document.createElement("a");h.href=u,h.download=`decorators-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u)}catch(r){console.error("Failed to export decorators:",r)}},o=async r=>{var u;const v=(u=r.target.files)==null?void 0:u[0];if(v){x(!0);try{const h=await v.text(),i=JSON.parse(h);await a(s,Array.isArray(i)?i:[i])}catch(h){console.error("Failed to import decorators:",h)}finally{x(!1),n.current&&(n.current.value="")}}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-top justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[t("decorators.title")," (",l.length,")"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t("decorators.description")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:n,type:"file",accept:".json",onChange:o,className:"hidden"}),e.jsxs("div",{className:"md:hidden flex gap-2 flex-1",children:[e.jsxs(Y,{children:[e.jsx(X,{asChild:!0,children:e.jsx(p,{variant:"outline",size:"icon",className:"rounded-full",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsxs(G,{align:"end",children:[e.jsxs(F,{onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},disabled:d,children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),t("common.import")]}),e.jsxs(F,{onClick:m,disabled:l.length===0,children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),t("common.export")]})]})]}),e.jsxs(p,{size:"icon",onClick:()=>N(!0),className:"gap-2 flex-1 rounded-full",children:[e.jsx(I,{className:"h-4 w-4"}),!Q&&t("decorators.addNew")]})]}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>{var r;return(r=n.current)==null?void 0:r.click()},disabled:d,className:"gap-2",children:[e.jsx(z,{className:"h-4 w-4"}),t("common.import")]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:m,disabled:l.length===0,className:"gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),t("common.export")]}),e.jsxs(p,{size:"sm",onClick:()=>N(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("decorators.addNew")]})]})]})]}),l.length===0?e.jsx(k,{children:e.jsx(D,{className:"p-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(Je,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:t("decorators.noDecorators")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-sm",children:t("decorators.noDecoratorsDescription")}),e.jsxs(p,{onClick:()=>N(!0),className:"gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),t("decorators.addNew")]})]})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(r=>e.jsx(zs,{decorator:r},r.id))}),e.jsx(Fs,{open:g,onOpenChange:N,projectId:s})]})}function As({project:s,onExport:l,onDelete:t}){const{t:a}=C(),{updateProject:c}=_e(),[g,N]=j.useState(!1),[d,x]=j.useState(!1),[n,m]=j.useState(!1),[o,r]=j.useState({name:s.name||"",description:s.description||"",version:s.version||"1.0.0"}),v=async()=>{if(o.name.trim()){x(!0);try{await c(s.id,{name:o.name,description:o.description,version:o.version}),N(!1)}catch(i){console.error("Failed to update project:",i)}finally{x(!1)}}},u=()=>{r({name:s.name||"",description:s.description||"",version:s.version||"1.0.0"}),N(!1)},h=()=>{m(!1),t()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a("settings.title")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a("settings.projectDescription")})]}),e.jsxs(k,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(le,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-5 w-5 text-primary"}),a("settings.projectInfo")]}),e.jsx(ce,{className:"mt-1.5",children:a("settings.projectInfoDescription")})]}),!g&&e.jsx(p,{onClick:()=>N(!0),variant:"outline",children:a("common.edit")})]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"name",children:a("projects.projectName")}),e.jsx(P,{id:"name",value:o.name,onChange:i=>r({...o,name:i.target.value}),disabled:!g,placeholder:a("projects.projectName")})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"description",children:a("projects.projectDescription")}),e.jsx(Be,{id:"description",value:o.description,onChange:i=>r({...o,description:i.target.value}),disabled:!g,placeholder:a("settings.descriptionPlaceholder"),rows:3})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"version",children:a("settings.version")}),e.jsx(P,{id:"version",value:o.version,onChange:i=>r({...o,version:i.target.value}),disabled:!g,placeholder:"1.0.0"})]})]}),g&&e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(p,{variant:"outline",onClick:u,disabled:d,children:a("common.cancel")}),e.jsxs(p,{onClick:v,disabled:d||!o.name.trim(),children:[e.jsx(Qe,{className:"h-4 w-4 mr-2"}),a(d?"common.saving":"common.save")]})]})]})]}),e.jsxs(k,{children:[e.jsxs(ne,{children:[e.jsx(le,{children:a("settings.metadata")}),e.jsx(ce,{children:a("settings.metadataDescription")})]}),e.jsx(D,{children:e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:a("settings.projectId")}),e.jsx("code",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:s.id})]}),e.jsx(Me,{}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:a("projects.created")}),e.jsx("span",{className:"text-sm font-medium",children:ye(s.createdAt)})]}),e.jsx(Me,{}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:a("projects.modified")}),e.jsx("span",{className:"text-sm font-medium",children:ye(s.modifiedAt)})]})]})})]}),e.jsxs(k,{children:[e.jsxs(ne,{children:[e.jsx(le,{children:a("settings.dataManagement")}),e.jsx(ce,{children:a("settings.dataManagementDescription")})]}),e.jsx(D,{className:"space-y-3",children:e.jsxs(p,{onClick:l,variant:"outline",className:"w-full justify-start gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),a("settings.exportProject")]})})]}),e.jsxs(k,{className:"border-destructive",children:[e.jsxs(ne,{children:[e.jsxs(le,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(es,{className:"h-5 w-5"}),a("settings.dangerZone")]}),e.jsx(ce,{children:a("settings.dangerZoneDescription")})]}),e.jsx(D,{children:e.jsxs(p,{variant:"destructive",onClick:()=>m(!0),className:"w-full justify-start gap-2",children:[e.jsx(R,{className:"h-4 w-4"}),a("projects.deleteProject")]})})]}),e.jsx(me,{open:n,onOpenChange:m,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:a("projects.deleteProject")}),e.jsx(pe,{children:a("projects.deleteConfirm")})]}),e.jsxs(ge,{children:[e.jsx(je,{children:a("common.cancel")}),e.jsx(fe,{onClick:h,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:a("common.delete")})]})]})})]})}function Bs(){const{t:s}=C(),{theme:l,resolvedTheme:t,setTheme:a}=ss(),{projectId:c}=Oe.useParams(),g=Oe.useSearch(),{projects:N,loadProjects:d,deleteProject:x,exportProject:n,importProject:m}=_e(),{dialogues:o,loadDialogues:r}=we(),{participants:v,loadParticipants:u}=K(),{categories:h,loadCategories:i}=M(),{decorators:f,loadDecorators:b}=de(),[y,L]=j.useState(!0),[E,ke]=j.useState((g==null?void 0:g.section)||"overview"),[Ze,De]=j.useState(!1),[Se,ie]=j.useState(!1),Ne=j.useRef(null);j.useEffect(()=>{(async()=>{L(!0),await Promise.all([d(),r(),u(c),i(c),b(c)]),L(!1)})()},[d,r,u,i,b,c]);const _=N.find(S=>S.id===c),ve=o.filter(S=>S.projectId===c),be=v.filter(S=>S.projectId===c),Ie=h.filter(S=>S.projectId===c),Pe=f.filter(S=>S.projectId===c),Fe=async()=>{try{await n(c)}catch(S){console.error("Failed to export project:",S)}},We=async S=>{var Ae;const Ee=(Ae=S.target.files)==null?void 0:Ae[0];if(Ee){De(!0);try{await m(Ee),await loadData()}catch(Ye){console.error("Failed to import project:",Ye)}finally{De(!1),Ne.current&&(Ne.current.value="")}}},ze=async()=>{window.confirm(s("projects.deleteConfirm"))&&(await x(c),window.location.href="#/")};return y?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:s("common.loading")})}):_?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsxs("header",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md border-b px-4 md:px-12 py-3 md:py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 min-w-0 flex-1",children:[e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>ie(!0),className:"lg:hidden rounded-full shrink-0",children:e.jsx(is,{className:"h-5 w-5"})}),e.jsx(oe,{to:"/",children:e.jsx(Le,{content:"Back to projects",side:"bottom",children:e.jsx(p,{variant:"ghost",size:"icon",className:"rounded-full shrink-0",children:e.jsx(ns,{className:"h-5 w-5"})})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-sm md:text-2xl font-bold tracking-tight truncate",children:_.name}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground hidden sm:block",children:s("projects.projectDetails")})]})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"hidden md:flex items-center text-xs font-medium text-muted-foreground bg-muted px-3 py-1.5 rounded-full",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 mr-2"}),s("dialogues.autoSaved")]}),e.jsx(Le,{content:t==="dark"?"Switch to light mode":"Switch to dark mode",side:"bottom",children:e.jsx(p,{variant:"outline",size:"icon",onClick:()=>a(t==="dark"?"light":"dark"),className:"rounded-full",children:t==="dark"?e.jsx(ls,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})})]})]}),Se&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>ie(!1)}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx(gs,{activeSection:E,onSectionChange:S=>{ke(S),ie(!1)},project:_,dialogueCount:ve.length,participantCount:be.length,isMobileOpen:Se,onMobileClose:()=>ie(!1)}),e.jsx("main",{className:"flex-1 bg-grid",children:e.jsxs("div",{className:"max-w-5xl mx-auto p-4 md:p-8 lg:p-12",children:[E==="overview"&&e.jsx(js,{project:_,dialogues:ve,participants:be,categories:Ie,decorators:Pe,onExport:Fe,onImport:We,onDelete:ze,onSectionChange:ke,fileInputRef:Ne,isImporting:Ze}),E==="dialogues"&&e.jsx(vs,{projectId:c,dialogues:ve}),E==="participants"&&e.jsx(Cs,{projectId:c,participants:be}),E==="categories"&&e.jsx(Is,{projectId:c,categories:Ie}),E==="decorators"&&e.jsx(Es,{projectId:c,decorators:Pe}),E==="settings"&&e.jsx(As,{project:_,onExport:Fe,onDelete:ze})]})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:s("projects.notFound")}),e.jsx("p",{className:"text-muted-foreground",children:s("projects.notFoundDescription")})]})})}export{Bs as component};
