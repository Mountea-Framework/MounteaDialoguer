import{c as ae,av as we,i as S,A as L,a4 as te,l as $,r as v,j as A,a9 as be,a6 as Qe,a5 as er,a7 as xe,aa as G,aw as Pe,ab as rr,ad as tr,aj as ar,ax as or,t as nr}from"./index-BHG1IMW6.js";import{useCategoryStore as Y}from"./categoryStore-LERQzdfP.js";import{R as ir,g as sr,e as Ce,i as cr,h as lr}from"./app-header-BL4IXb3f.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ae("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),zr=we((i,n)=>({participants:[],isLoading:!1,maxParticipantNameLength:16,loadParticipants:async t=>{i({isLoading:!0});try{const a=await S.participants.where("projectId").equals(t).toArray();i({participants:a,isLoading:!1})}catch(a){console.error("Failed to load participants:",a),L({variant:"error",title:"Failed to Load Participants",description:a.message||"An unexpected error occurred"}),i({isLoading:!1})}},createParticipant:async t=>{var a;try{const o=((a=t.name)==null?void 0:a.trim())||"";if(!o)throw new Error("Participant name is required");if(!/^[A-Za-z0-9]+$/.test(o))throw new Error("Participant name must contain only letters and numbers");if(o.length>n().maxParticipantNameLength)throw new Error(`Participant name must be ${n().maxParticipantNameLength} characters or fewer`);if(!t.category)throw new Error("Participant category is required");const s=await S.categories.where("projectId").equals(t.projectId).toArray(),c=await S.participants.where("projectId").equals(t.projectId).toArray(),T=f=>{const l=s.find(M=>M.name===f);return l?Y.getState().getRootCategoryId(l.id,s):null},u=T(t.category);if(u&&c.some(l=>l.name!==o?!1:T(l.category)===u))throw new Error("Participant name must be unique within its category tree");const E=new Date().toISOString(),P={id:te(),...t,createdAt:E,modifiedAt:E};return await S.participants.add(P),await n().loadParticipants(t.projectId),$.getState().schedulePush(t.projectId),L({variant:"success",title:"Participant Created",description:`${t.name} has been created successfully`}),P}catch(o){throw console.error("Error creating participant:",o),L({variant:"error",title:"Failed to Create Participant",description:o.message||"An unexpected error occurred"}),o}},updateParticipant:async(t,a)=>{var o;try{const s=await S.participants.get(t);if(!s)throw new Error("Participant not found");const c=((o=a.name??s.name)==null?void 0:o.trim())||"";if(!c)throw new Error("Participant name is required");if(!/^[A-Za-z0-9]+$/.test(c))throw new Error("Participant name must contain only letters and numbers");if(c.length>n().maxParticipantNameLength)throw new Error(`Participant name must be ${n().maxParticipantNameLength} characters or fewer`);const T=a.category??s.category;if(!T)throw new Error("Participant category is required");const u=await S.categories.where("projectId").equals(s.projectId).toArray(),E=await S.participants.where("projectId").equals(s.projectId).toArray(),y=l=>{const M=u.find(k=>k.name===l);return M?Y.getState().getRootCategoryId(M.id,u):null},P=y(T);if(P&&E.some(M=>M.id===s.id||M.name!==c?!1:y(M.category)===P))throw new Error("Participant name must be unique within its category tree");const f={...s,...a,modifiedAt:new Date().toISOString()};return await S.participants.update(t,f),await n().loadParticipants(s.projectId),$.getState().schedulePush(s.projectId),L({variant:"success",title:"Participant Updated",description:"Participant has been updated successfully"}),f}catch(s){throw console.error("Error updating participant:",s),L({variant:"error",title:"Failed to Update Participant",description:s.message||"An unexpected error occurred"}),s}},deleteParticipant:async t=>{try{const a=await S.participants.get(t);if(!a)throw new Error("Participant not found");await S.participants.delete(t),await n().loadParticipants(a.projectId),$.getState().schedulePush(a.projectId),L({variant:"success",title:"Participant Deleted",description:"Participant has been deleted"})}catch(a){throw console.error("Error deleting participant:",a),L({variant:"error",title:"Failed to Delete Participant",description:a.message||"An unexpected error occurred"}),a}},importParticipants:async(t,a)=>{try{const o=new Date().toISOString(),s=new Set;if(a.forEach(f=>{f.fullPath&&s.add(f.fullPath)}),s.size>0){const f=Array.from(s).map(l=>({name:l.split(".").pop(),fullPath:l}));await Y.getState().importCategories(t,f)}const c=await S.categories.where("projectId").equals(t).toArray(),T=new Map;c.forEach(f=>{const l=Y.getState().buildCategoryPath(f.id,c);T.set(l,f.name)});const u=a.map(f=>{const l=f.fullPath?T.get(f.fullPath):f.category;return{id:te(),name:f.name,category:l||"Unknown",projectId:t,createdAt:o,modifiedAt:o}}),E=await S.participants.where("projectId").equals(t).toArray(),y=f=>{const l=c.find(M=>M.name===f);return l?Y.getState().getRootCategoryId(l.id,c):null},P=new Map;return E.forEach(f=>{const l=y(f.category);l&&(P.has(l)||P.set(l,new Set),P.get(l).add(f.name))}),u.forEach(f=>{var k;const l=((k=f.name)==null?void 0:k.trim())||"";if(!l)throw new Error("Participant name is required");if(!/^[A-Za-z0-9]+$/.test(l))throw new Error("Participant name must contain only letters and numbers");if(l.length>n().maxParticipantNameLength)throw new Error(`Participant name must be ${n().maxParticipantNameLength} characters or fewer`);const M=y(f.category);if(M){P.has(M)||P.set(M,new Set);const w=P.get(M);if(w.has(l))throw new Error("Participant name must be unique within its category tree");w.add(l)}}),await S.participants.bulkAdd(u),await n().loadParticipants(t),$.getState().schedulePush(t),L({variant:"success",title:"Participants Imported",description:`${u.length} participants have been imported`}),u}catch(o){throw console.error("Error importing participants:",o),L({variant:"error",title:"Failed to Import Participants",description:o.message||"An unexpected error occurred"}),o}},exportParticipants:async t=>{try{const a=await S.participants.where("projectId").equals(t).toArray(),o=await S.categories.where("projectId").equals(t).toArray(),s=new Map;return o.forEach(c=>{const T=Y.getState().buildCategoryPath(c.id,o);s.set(c.name,T)}),a.map(c=>({name:c.name,fullPath:s.get(c.category)||c.category}))}catch(a){throw console.error("Error exporting participants:",a),L({variant:"error",title:"Failed to Export Participants",description:a.message||"An unexpected error occurred"}),a}}})),$r=we((i,n)=>({decorators:[],isLoading:!1,loadDecorators:async t=>{i({isLoading:!0});try{const a=await S.decorators.where("projectId").equals(t).toArray();i({decorators:a,isLoading:!1})}catch(a){console.error("Failed to load decorators:",a),L({variant:"error",title:"Failed to Load Decorators",description:a.message||"An unexpected error occurred"}),i({isLoading:!1})}},createDecorator:async t=>{try{const a=new Date().toISOString(),s={id:te(),...t,createdAt:a,modifiedAt:a};return await S.decorators.add(s),await n().loadDecorators(t.projectId),$.getState().schedulePush(t.projectId),L({variant:"success",title:"Decorator Created",description:`${t.name} has been created successfully`}),s}catch(a){throw console.error("Error creating decorator:",a),L({variant:"error",title:"Failed to Create Decorator",description:a.message||"An unexpected error occurred"}),a}},updateDecorator:async(t,a)=>{try{const o=await S.decorators.get(t);if(!o)throw new Error("Decorator not found");const s={...o,...a,modifiedAt:new Date().toISOString()};return await S.decorators.update(t,s),await n().loadDecorators(o.projectId),$.getState().schedulePush(o.projectId),L({variant:"success",title:"Decorator Updated",description:"Decorator has been updated successfully"}),s}catch(o){throw console.error("Error updating decorator:",o),L({variant:"error",title:"Failed to Update Decorator",description:o.message||"An unexpected error occurred"}),o}},deleteDecorator:async t=>{try{const a=await S.decorators.get(t);if(!a)throw new Error("Decorator not found");await S.decorators.delete(t),await n().loadDecorators(a.projectId),$.getState().schedulePush(a.projectId),L({variant:"success",title:"Decorator Deleted",description:"Decorator has been deleted"})}catch(a){throw console.error("Error deleting decorator:",a),L({variant:"error",title:"Failed to Delete Decorator",description:a.message||"An unexpected error occurred"}),a}},importDecorators:async(t,a)=>{try{const o=new Date().toISOString(),s=a.map(c=>({...c,id:te(),projectId:t,createdAt:o,modifiedAt:o}));return await S.decorators.bulkAdd(s),await n().loadDecorators(t),$.getState().schedulePush(t),L({variant:"success",title:"Decorators Imported",description:`${s.length} decorators have been imported`}),s}catch(o){throw console.error("Error importing decorators:",o),L({variant:"error",title:"Failed to Import Decorators",description:o.message||"An unexpected error occurred"}),o}},exportDecorators:async t=>{try{return(await S.decorators.where("projectId").equals(t).toArray()).map(({id:o,projectId:s,createdAt:c,modifiedAt:T,...u})=>u)}catch(a){throw console.error("Error exporting decorators:",a),L({variant:"error",title:"Failed to Export Decorators",description:a.message||"An unexpected error occurred"}),a}}}));var dr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ur="VisuallyHidden",Me=v.forwardRef((i,n)=>A.jsx(be.span,{...i,ref:n,style:{...dr,...i.style}}));Me.displayName=ur;var pr=Me,[oe]=tr("Tooltip",[Ce]),ne=Ce(),Te="TooltipProvider",hr=700,ce="tooltip.open",[fr,de]=oe(Te),Ee=i=>{const{__scopeTooltip:n,delayDuration:t=hr,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:s}=i,c=v.useRef(!0),T=v.useRef(!1),u=v.useRef(0);return v.useEffect(()=>{const E=u.current;return()=>window.clearTimeout(E)},[]),A.jsx(fr,{scope:n,isOpenDelayedRef:c,delayDuration:t,onOpen:v.useCallback(()=>{window.clearTimeout(u.current),c.current=!1},[]),onClose:v.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:T,onPointerInTransitChange:v.useCallback(E=>{T.current=E},[]),disableHoverableContent:o,children:s})};Ee.displayName=Te;var X="Tooltip",[mr,Q]=oe(X),Ie=i=>{const{__scopeTooltip:n,children:t,open:a,defaultOpen:o,onOpenChange:s,disableHoverableContent:c,delayDuration:T}=i,u=de(X,i.__scopeTooltip),E=ne(n),[y,P]=v.useState(null),f=Qe(),l=v.useRef(0),M=c??u.disableHoverableContent,k=T??u.delayDuration,w=v.useRef(!1),[q,N]=er({prop:a,defaultProp:o??!1,onChange:re=>{re?(u.onOpen(),document.dispatchEvent(new CustomEvent(ce))):u.onClose(),s==null||s(re)},caller:X}),U=v.useMemo(()=>q?w.current?"delayed-open":"instant-open":"closed",[q]),V=v.useCallback(()=>{window.clearTimeout(l.current),l.current=0,w.current=!1,N(!0)},[N]),W=v.useCallback(()=>{window.clearTimeout(l.current),l.current=0,N(!1)},[N]),ee=v.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>{w.current=!0,N(!0),l.current=0},k)},[k,N]);return v.useEffect(()=>()=>{l.current&&(window.clearTimeout(l.current),l.current=0)},[]),A.jsx(ir,{...E,children:A.jsx(mr,{scope:n,contentId:f,open:q,stateAttribute:U,trigger:y,onTriggerChange:P,onTriggerEnter:v.useCallback(()=>{u.isOpenDelayedRef.current?ee():V()},[u.isOpenDelayedRef,ee,V]),onTriggerLeave:v.useCallback(()=>{M?W():(window.clearTimeout(l.current),l.current=0)},[W,M]),onOpen:V,onClose:W,disableHoverableContent:M,children:t})})};Ie.displayName=X;var le="TooltipTrigger",Ae=v.forwardRef((i,n)=>{const{__scopeTooltip:t,...a}=i,o=Q(le,t),s=de(le,t),c=ne(t),T=v.useRef(null),u=xe(n,T,o.onTriggerChange),E=v.useRef(!1),y=v.useRef(!1),P=v.useCallback(()=>E.current=!1,[]);return v.useEffect(()=>()=>document.removeEventListener("pointerup",P),[P]),A.jsx(sr,{asChild:!0,...c,children:A.jsx(be.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:u,onPointerMove:G(i.onPointerMove,f=>{f.pointerType!=="touch"&&!y.current&&!s.isPointerInTransitRef.current&&(o.onTriggerEnter(),y.current=!0)}),onPointerLeave:G(i.onPointerLeave,()=>{o.onTriggerLeave(),y.current=!1}),onPointerDown:G(i.onPointerDown,()=>{o.open&&o.onClose(),E.current=!0,document.addEventListener("pointerup",P,{once:!0})}),onFocus:G(i.onFocus,()=>{E.current||o.onOpen()}),onBlur:G(i.onBlur,o.onClose),onClick:G(i.onClick,o.onClose)})})});Ae.displayName=le;var ue="TooltipPortal",[gr,vr]=oe(ue,{forceMount:void 0}),Re=i=>{const{__scopeTooltip:n,forceMount:t,children:a,container:o}=i,s=Q(ue,n);return A.jsx(gr,{scope:n,forceMount:t,children:A.jsx(Pe,{present:t||s.open,children:A.jsx(rr,{asChild:!0,container:o,children:a})})})};Re.displayName=ue;var K="TooltipContent",Se=v.forwardRef((i,n)=>{const t=vr(K,i.__scopeTooltip),{forceMount:a=t.forceMount,side:o="top",...s}=i,c=Q(K,i.__scopeTooltip);return A.jsx(Pe,{present:a||c.open,children:c.disableHoverableContent?A.jsx(De,{side:o,...s,ref:n}):A.jsx(yr,{side:o,...s,ref:n})})}),yr=v.forwardRef((i,n)=>{const t=Q(K,i.__scopeTooltip),a=de(K,i.__scopeTooltip),o=v.useRef(null),s=xe(n,o),[c,T]=v.useState(null),{trigger:u,onClose:E}=t,y=o.current,{onPointerInTransitChange:P}=a,f=v.useCallback(()=>{T(null),P(!1)},[P]),l=v.useCallback((M,k)=>{const w=M.currentTarget,q={x:M.clientX,y:M.clientY},N=Pr(q,w.getBoundingClientRect()),U=Cr(q,N),V=Mr(k.getBoundingClientRect()),W=Er([...U,...V]);T(W),P(!0)},[P]);return v.useEffect(()=>()=>f(),[f]),v.useEffect(()=>{if(u&&y){const M=w=>l(w,y),k=w=>l(w,u);return u.addEventListener("pointerleave",M),y.addEventListener("pointerleave",k),()=>{u.removeEventListener("pointerleave",M),y.removeEventListener("pointerleave",k)}}},[u,y,l,f]),v.useEffect(()=>{if(c){const M=k=>{const w=k.target,q={x:k.clientX,y:k.clientY},N=(u==null?void 0:u.contains(w))||(y==null?void 0:y.contains(w)),U=!Tr(q,c);N?f():U&&(f(),E())};return document.addEventListener("pointermove",M),()=>document.removeEventListener("pointermove",M)}},[u,y,c,E,f]),A.jsx(De,{...i,ref:s})}),[wr,br]=oe(X,{isInside:!1}),xr=or("TooltipContent"),De=v.forwardRef((i,n)=>{const{__scopeTooltip:t,children:a,"aria-label":o,onEscapeKeyDown:s,onPointerDownOutside:c,...T}=i,u=Q(K,t),E=ne(t),{onClose:y}=u;return v.useEffect(()=>(document.addEventListener(ce,y),()=>document.removeEventListener(ce,y)),[y]),v.useEffect(()=>{if(u.trigger){const P=f=>{const l=f.target;l!=null&&l.contains(u.trigger)&&y()};return window.addEventListener("scroll",P,{capture:!0}),()=>window.removeEventListener("scroll",P,{capture:!0})}},[u.trigger,y]),A.jsx(ar,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:c,onFocusOutside:P=>P.preventDefault(),onDismiss:y,children:A.jsxs(lr,{"data-state":u.stateAttribute,...E,...T,ref:n,style:{...T.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[A.jsx(xr,{children:a}),A.jsx(wr,{scope:t,isInside:!0,children:A.jsx(pr,{id:u.contentId,role:"tooltip",children:o||a})})]})})});Se.displayName=K;var je="TooltipArrow",Le=v.forwardRef((i,n)=>{const{__scopeTooltip:t,...a}=i,o=ne(t);return br(je,t).isInside?null:A.jsx(cr,{...o,...a,ref:n})});Le.displayName=je;function Pr(i,n){const t=Math.abs(n.top-i.y),a=Math.abs(n.bottom-i.y),o=Math.abs(n.right-i.x),s=Math.abs(n.left-i.x);switch(Math.min(t,a,o,s)){case s:return"left";case o:return"right";case t:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function Cr(i,n,t=5){const a=[];switch(n){case"top":a.push({x:i.x-t,y:i.y+t},{x:i.x+t,y:i.y+t});break;case"bottom":a.push({x:i.x-t,y:i.y-t},{x:i.x+t,y:i.y-t});break;case"left":a.push({x:i.x+t,y:i.y-t},{x:i.x+t,y:i.y+t});break;case"right":a.push({x:i.x-t,y:i.y-t},{x:i.x-t,y:i.y+t});break}return a}function Mr(i){const{top:n,right:t,bottom:a,left:o}=i;return[{x:o,y:n},{x:t,y:n},{x:t,y:a},{x:o,y:a}]}function Tr(i,n){const{x:t,y:a}=i;let o=!1;for(let s=0,c=n.length-1;s<n.length;c=s++){const T=n[s],u=n[c],E=T.x,y=T.y,P=u.x,f=u.y;y>a!=f>a&&t<(P-E)*(a-y)/(f-y)+E&&(o=!o)}return o}function Er(i){const n=i.slice();return n.sort((t,a)=>t.x<a.x?-1:t.x>a.x?1:t.y<a.y?-1:t.y>a.y?1:0),Ir(n)}function Ir(i){if(i.length<=1)return i.slice();const n=[];for(let a=0;a<i.length;a++){const o=i[a];for(;n.length>=2;){const s=n[n.length-1],c=n[n.length-2];if((s.x-c.x)*(o.y-c.y)>=(s.y-c.y)*(o.x-c.x))n.pop();else break}n.push(o)}n.pop();const t=[];for(let a=i.length-1;a>=0;a--){const o=i[a];for(;t.length>=2;){const s=t[t.length-1],c=t[t.length-2];if((s.x-c.x)*(o.y-c.y)>=(s.y-c.y)*(o.x-c.x))t.pop();else break}t.push(o)}return t.pop(),n.length===1&&t.length===1&&n[0].x===t[0].x&&n[0].y===t[0].y?n:n.concat(t)}var Ar=Ee,Rr=Ie,Sr=Ae,Dr=Re,ke=Se,jr=Le;const Lr=Ar,kr=Rr,Or=Sr,Oe=v.forwardRef(({className:i,sideOffset:n=4,showArrow:t=!0,children:a,...o},s)=>A.jsx(Dr,{children:A.jsxs(ke,{ref:s,sideOffset:n,className:nr("z-50 overflow-hidden rounded-md bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=open]:fade-in-0 data-[state=closed]:fade-out-0 data-[state=open]:duration-150 data-[state=closed]:duration-150",i),...o,children:[a,t?A.jsx(jr,{className:"fill-popover"}):null]})}));Oe.displayName=ke.displayName;const Vr=({children:i,content:n,side:t="top",...a})=>A.jsx(Lr,{children:A.jsxs(kr,{children:[A.jsx(Or,{asChild:!0,children:i}),A.jsx(Oe,{side:t,...a,children:n})]})});var pe={};(function i(n,t,a,o){var s=!!(n.Worker&&n.Blob&&n.Promise&&n.OffscreenCanvas&&n.OffscreenCanvasRenderingContext2D&&n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype.transferControlToOffscreen&&n.URL&&n.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",T=(function(){if(!n.OffscreenCanvas)return!1;try{var r=new OffscreenCanvas(1,1),e=r.getContext("2d");e.fillRect(0,0,1,1);var d=r.transferToImageBitmap();e.createPattern(d,"no-repeat")}catch{return!1}return!0})();function u(){}function E(r){var e=t.exports.Promise,d=e!==void 0?e:n.Promise;return typeof d=="function"?new d(r):(r(u,u),null)}var y=(function(r,e){return{transform:function(d){if(r)return d;if(e.has(d))return e.get(d);var h=new OffscreenCanvas(d.width,d.height),m=h.getContext("2d");return m.drawImage(d,0,0),e.set(d,h),h},clear:function(){e.clear()}}})(T,new Map),P=(function(){var r=Math.floor(16.666666666666668),e,d,h={},m=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(g){var b=Math.random();return h[b]=requestAnimationFrame(function p(x){m===x||m+r-1<x?(m=x,delete h[b],g()):h[b]=requestAnimationFrame(p)}),b},d=function(g){h[g]&&cancelAnimationFrame(h[g])}):(e=function(g){return setTimeout(g,r)},d=function(g){return clearTimeout(g)}),{frame:e,cancel:d}})(),f=(function(){var r,e,d={};function h(m){function g(b,p){m.postMessage({options:b||{},callback:p})}m.init=function(p){var x=p.transferControlToOffscreen();m.postMessage({canvas:x},[x])},m.fire=function(p,x,I){if(e)return g(p,null),e;var D=Math.random().toString(36).slice(2);return e=E(function(R){function j(O){O.data.callback===D&&(delete d[D],m.removeEventListener("message",j),e=null,y.clear(),I(),R())}m.addEventListener("message",j),g(p,D),d[D]=j.bind(null,{data:{callback:D}})}),e},m.reset=function(){m.postMessage({reset:!0});for(var p in d)d[p](),delete d[p]}}return function(){if(r)return r;if(!a&&s){var m=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{r=new Worker(URL.createObjectURL(new Blob([m])))}catch(g){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",g),null}h(r)}return r}})(),l={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function M(r,e){return e?e(r):r}function k(r){return r!=null}function w(r,e,d){return M(r&&k(r[e])?r[e]:l[e],d)}function q(r){return r<0?0:Math.floor(r)}function N(r,e){return Math.floor(Math.random()*(e-r))+r}function U(r){return parseInt(r,16)}function V(r){return r.map(W)}function W(r){var e=String(r).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:U(e.substring(0,2)),g:U(e.substring(2,4)),b:U(e.substring(4,6))}}function ee(r){var e=w(r,"origin",Object);return e.x=w(e,"x",Number),e.y=w(e,"y",Number),e}function re(r){r.width=document.documentElement.clientWidth,r.height=document.documentElement.clientHeight}function Fe(r){var e=r.getBoundingClientRect();r.width=e.width,r.height=e.height}function Ne(r){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=r,e}function _e(r,e,d,h,m,g,b,p,x){r.save(),r.translate(e,d),r.rotate(g),r.scale(h,m),r.arc(0,0,1,b,p,x),r.restore()}function Be(r){var e=r.angle*(Math.PI/180),d=r.spread*(Math.PI/180);return{x:r.x,y:r.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:r.startVelocity*.5+Math.random()*r.startVelocity,angle2D:-e+(.5*d-Math.random()*d),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar,flat:r.flat}}function qe(r,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var d=e.tick++/e.totalTicks,h=e.x+e.random*e.tiltCos,m=e.y+e.random*e.tiltSin,g=e.wobbleX+e.random*e.tiltCos,b=e.wobbleY+e.random*e.tiltSin;if(r.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-d)+")",r.beginPath(),c&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))r.fill(Ue(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(g-h)*.1,Math.abs(b-m)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var p=Math.PI/10*e.wobble,x=Math.abs(g-h)*.1,I=Math.abs(b-m)*.1,D=e.shape.bitmap.width*e.scalar,R=e.shape.bitmap.height*e.scalar,j=new DOMMatrix([Math.cos(p)*x,Math.sin(p)*x,-Math.sin(p)*I,Math.cos(p)*I,e.x,e.y]);j.multiplySelf(new DOMMatrix(e.shape.matrix));var O=r.createPattern(y.transform(e.shape.bitmap),"no-repeat");O.setTransform(j),r.globalAlpha=1-d,r.fillStyle=O,r.fillRect(e.x-D/2,e.y-R/2,D,R),r.globalAlpha=1}else if(e.shape==="circle")r.ellipse?r.ellipse(e.x,e.y,Math.abs(g-h)*e.ovalScalar,Math.abs(b-m)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):_e(r,e.x,e.y,Math.abs(g-h)*e.ovalScalar,Math.abs(b-m)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var C=Math.PI/2*3,F=4*e.scalar,_=8*e.scalar,B=e.x,z=e.y,Z=5,H=Math.PI/Z;Z--;)B=e.x+Math.cos(C)*_,z=e.y+Math.sin(C)*_,r.lineTo(B,z),C+=H,B=e.x+Math.cos(C)*F,z=e.y+Math.sin(C)*F,r.lineTo(B,z),C+=H;else r.moveTo(Math.floor(e.x),Math.floor(e.y)),r.lineTo(Math.floor(e.wobbleX),Math.floor(m)),r.lineTo(Math.floor(g),Math.floor(b)),r.lineTo(Math.floor(h),Math.floor(e.wobbleY));return r.closePath(),r.fill(),e.tick<e.totalTicks}function He(r,e,d,h,m){var g=e.slice(),b=r.getContext("2d"),p,x,I=E(function(D){function R(){p=x=null,b.clearRect(0,0,h.width,h.height),y.clear(),m(),D()}function j(){a&&!(h.width===o.width&&h.height===o.height)&&(h.width=r.width=o.width,h.height=r.height=o.height),!h.width&&!h.height&&(d(r),h.width=r.width,h.height=r.height),b.clearRect(0,0,h.width,h.height),g=g.filter(function(O){return qe(b,O)}),g.length?p=P.frame(j):R()}p=P.frame(j),x=R});return{addFettis:function(D){return g=g.concat(D),I},canvas:r,promise:I,reset:function(){p&&P.cancel(p),x&&x()}}}function he(r,e){var d=!r,h=!!w(e||{},"resize"),m=!1,g=w(e,"disableForReducedMotion",Boolean),b=s&&!!w(e||{},"useWorker"),p=b?f():null,x=d?re:Fe,I=r&&p?!!r.__confetti_initialized:!1,D=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,R;function j(C,F,_){for(var B=w(C,"particleCount",q),z=w(C,"angle",Number),Z=w(C,"spread",Number),H=w(C,"startVelocity",Number),Ve=w(C,"decay",Number),We=w(C,"gravity",Number),Ze=w(C,"drift",Number),me=w(C,"colors",V),Ge=w(C,"ticks",Number),ge=w(C,"shapes"),Ye=w(C,"scalar"),Ke=!!w(C,"flat"),ve=ee(C),ye=B,se=[],Xe=r.width*ve.x,Je=r.height*ve.y;ye--;)se.push(Be({x:Xe,y:Je,angle:z,spread:Z,startVelocity:H,color:me[ye%me.length],shape:ge[N(0,ge.length)],ticks:Ge,decay:Ve,gravity:We,drift:Ze,scalar:Ye,flat:Ke}));return R?R.addFettis(se):(R=He(r,se,x,F,_),R.promise)}function O(C){var F=g||w(C,"disableForReducedMotion",Boolean),_=w(C,"zIndex",Number);if(F&&D)return E(function(H){H()});d&&R?r=R.canvas:d&&!r&&(r=Ne(_),document.body.appendChild(r)),h&&!I&&x(r);var B={width:r.width,height:r.height};p&&!I&&p.init(r),I=!0,p&&(r.__confetti_initialized=!0);function z(){if(p){var H={getBoundingClientRect:function(){if(!d)return r.getBoundingClientRect()}};x(H),p.postMessage({resize:{width:H.width,height:H.height}});return}B.width=B.height=null}function Z(){R=null,h&&(m=!1,n.removeEventListener("resize",z)),d&&r&&(document.body.contains(r)&&document.body.removeChild(r),r=null,I=!1)}return h&&!m&&(m=!0,n.addEventListener("resize",z,!1)),p?p.fire(C,B,Z):j(C,B,Z)}return O.reset=function(){p&&p.reset(),R&&R.reset()},O}var ie;function fe(){return ie||(ie=he(null,{useWorker:!0,resize:!0})),ie}function Ue(r,e,d,h,m,g,b){var p=new Path2D(r),x=new Path2D;x.addPath(p,new DOMMatrix(e));var I=new Path2D;return I.addPath(x,new DOMMatrix([Math.cos(b)*m,Math.sin(b)*m,-Math.sin(b)*g,Math.cos(b)*g,d,h])),I}function ze(r){if(!c)throw new Error("path confetti are not supported in this browser");var e,d;typeof r=="string"?e=r:(e=r.path,d=r.matrix);var h=new Path2D(e),m=document.createElement("canvas"),g=m.getContext("2d");if(!d){for(var b=1e3,p=b,x=b,I=0,D=0,R,j,O=0;O<b;O+=2)for(var C=0;C<b;C+=2)g.isPointInPath(h,O,C,"nonzero")&&(p=Math.min(p,O),x=Math.min(x,C),I=Math.max(I,O),D=Math.max(D,C));R=I-p,j=D-x;var F=10,_=Math.min(F/R,F/j);d=[_,0,0,_,-Math.round(R/2+p)*_,-Math.round(j/2+x)*_]}return{type:"path",path:e,matrix:d}}function $e(r){var e,d=1,h="#000000",m='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof r=="string"?e=r:(e=r.text,d="scalar"in r?r.scalar:d,m="fontFamily"in r?r.fontFamily:m,h="color"in r?r.color:h);var g=10*d,b=""+g+"px "+m,p=new OffscreenCanvas(g,g),x=p.getContext("2d");x.font=b;var I=x.measureText(e),D=Math.ceil(I.actualBoundingBoxRight+I.actualBoundingBoxLeft),R=Math.ceil(I.actualBoundingBoxAscent+I.actualBoundingBoxDescent),j=2,O=I.actualBoundingBoxLeft+j,C=I.actualBoundingBoxAscent+j;D+=j+j,R+=j+j,p=new OffscreenCanvas(D,R),x=p.getContext("2d"),x.font=b,x.fillStyle=h,x.fillText(e,O,C);var F=1/d;return{type:"bitmap",bitmap:p.transferToImageBitmap(),matrix:[F,0,0,F,-D*F/2,-R*F/2]}}t.exports=function(){return fe().apply(this,arguments)},t.exports.reset=function(){fe().reset()},t.exports.create=he,t.exports.shapeFromPath=ze,t.exports.shapeFromText=$e})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),pe,!1);const J=pe.exports;pe.exports.create;const Wr=()=>{const n=Date.now()+3e3,t={startVelocity:30,spread:360,ticks:60,zIndex:0};function a(s,c){return Math.random()*(c-s)+s}const o=setInterval(function(){const s=n-Date.now();if(s<=0)return clearInterval(o);const c=50*(s/3e3);J({...t,particleCount:c,origin:{x:a(.1,.3),y:Math.random()-.2}}),J({...t,particleCount:c,origin:{x:a(.7,.9),y:Math.random()-.2}})},250)},Zr=()=>{J({particleCount:50,angle:60,spread:55,origin:{x:0},colors:["#10b981","#22c55e","#86efac"]}),J({particleCount:50,angle:120,spread:55,origin:{x:1},colors:["#10b981","#22c55e","#86efac"]})},Gr=()=>{J({particleCount:30,spread:40,origin:{y:.5},scalar:.8,gravity:1.2,colors:["#fbbf24","#f59e0b","#fb923c"]})};export{qr as C,Hr as M,Vr as S,Ur as T,dr as V,Gr as a,Br as b,Wr as c,$r as d,Zr as e,zr as u};
